---
import { Code, Icon } from '@astrojs/starlight/components';

// Define all possible code combinations
const codes = {
  empty: `var builder = DistributedApplication.CreateBuilder(args);

// This would be a rather boring AppHost ☹️...
// Toggle the options above to see what an AppHost might look like.
// For example, select "Front end" to add a frontend service.

builder.Build().Run();`,

  frontend: `var builder = DistributedApplication.CreateBuilder(args);

// Add frontend service
var frontend = builder.AddViteApp("frontend", "../frontend")
    .WithHttpEndpoint(env: "PORT");

builder.Build().Run();`,

  frontendContainer: `var builder = DistributedApplication.CreateBuilder(args);

// Add frontend service
var frontend = builder.AddViteApp("frontend", "../frontend")
    .WithHttpEndpoint(env: "PORT");

// Add custom container
var customContainer = builder.AddContainer("mycustomcontainer", "myregistry/myapp", "latest")
    .WithHttpEndpoint(targetPort: 8080);

builder.Build().Run();`,

  databaseFrontend: `var builder = DistributedApplication.CreateBuilder(args);

// Add database
var postgres = builder.AddPostgres("db")
    .AddDatabase("appdata");

// Add frontend service
var frontend = builder.AddViteApp("frontend", "../frontend")
    .WithHttpEndpoint(env: "PORT");

builder.Build().Run();`,

  databaseFrontendContainer: `var builder = DistributedApplication.CreateBuilder(args);

// Add database
var postgres = builder.AddPostgres("db")
    .AddDatabase("appdata");

// Add frontend service
var frontend = builder.AddViteApp("frontend", "../frontend")
    .WithHttpEndpoint(env: "PORT");

// Add custom container
var customContainer = builder.AddContainer("mycustomcontainer", "myregistry/myapp", "latest")
    .WithHttpEndpoint(targetPort: 8080);

builder.Build().Run();`,

  apiFrontend: `var builder = DistributedApplication.CreateBuilder(args);

// Add API service
var api = builder.AddProject("api", "../api/ApiService.csproj");

// Add frontend service and reference the API
var frontend = builder.AddViteApp("frontend", "../frontend")
    .WithHttpEndpoint(env: "PORT")
    .WithReference(api);

builder.Build().Run();`,

  apiFrontendContainer: `var builder = DistributedApplication.CreateBuilder(args);

// Add API service
var api = builder.AddProject("api", "../api/ApiService.csproj");

// Add frontend service and reference the API
var frontend = builder.AddViteApp("frontend", "../frontend")
    .WithHttpEndpoint(env: "PORT")
    .WithReference(api);

// Add custom container
var customContainer = builder.AddContainer("mycustomcontainer", "myregistry/myapp", "latest")
    .WithHttpEndpoint(targetPort: 8080);

builder.Build().Run();`,

  databaseApiFrontend: `var builder = DistributedApplication.CreateBuilder(args);

// Add database
var postgres = builder.AddPostgres("db")
    .AddDatabase("appdata");

// Add API service and reference the database
var api = builder.AddProject("api", "../api/ApiService.csproj")
    .WithReference(postgres);

// Add frontend service and reference the API
var frontend = builder.AddViteApp("frontend", "../frontend")
    .WithHttpEndpoint(env: "PORT")
    .WithReference(api);

builder.Build().Run();`,

  databaseApiFrontendContainer: `var builder = DistributedApplication.CreateBuilder(args);

// Add database
var postgres = builder.AddPostgres("db")
    .AddDatabase("appdata");

// Add API service and reference the database
var api = builder.AddProject("api", "../api/ApiService.csproj")
    .WithReference(postgres);

// Add frontend service and reference the API
var frontend = builder.AddViteApp("frontend", "../frontend")
    .WithHttpEndpoint(env: "PORT")
    .WithReference(api);

// Add custom container
var customContainer = builder.AddContainer("mycustomcontainer", "myregistry/myapp", "latest")
    .WithHttpEndpoint(targetPort: 8080);

builder.Build().Run();`,

  // Non-frontend variants
  database: `var builder = DistributedApplication.CreateBuilder(args);

// Add database
var postgres = builder.AddPostgres("db")
    .AddDatabase("appdata");

builder.Build().Run();`,

  databaseContainer: `var builder = DistributedApplication.CreateBuilder(args);

// Add database
var postgres = builder.AddPostgres("db")
    .AddDatabase("appdata");

// Add custom container
var customContainer = builder.AddContainer("mycustomcontainer", "myregistry/myapp", "latest")
    .WithHttpEndpoint(targetPort: 8080);

builder.Build().Run();`,

  api: `var builder = DistributedApplication.CreateBuilder(args);

// Add API service
var api = builder.AddProject("api", "../api/ApiService.csproj");

builder.Build().Run();`,

  apiContainer: `var builder = DistributedApplication.CreateBuilder(args);

// Add API service
var api = builder.AddProject("api", "../api/ApiService.csproj");

// Add custom container
var customContainer = builder.AddContainer("mycustomcontainer", "myregistry/myapp", "latest")
    .WithHttpEndpoint(targetPort: 8080);

builder.Build().Run();`,

  databaseApi: `var builder = DistributedApplication.CreateBuilder(args);

// Add database
var postgres = builder.AddPostgres("db")
    .AddDatabase("appdata");

// Add API service and reference the database
var api = builder.AddProject("api", "../api/ApiService.csproj")
    .WithReference(postgres);

builder.Build().Run();`,

  databaseApiContainer: `var builder = DistributedApplication.CreateBuilder(args);

// Add database
var postgres = builder.AddPostgres("db")
    .AddDatabase("appdata");

// Add API service and reference the database
var api = builder.AddProject("api", "../api/ApiService.csproj")
    .WithReference(postgres);

// Add custom container
var customContainer = builder.AddContainer("mycustomcontainer", "myregistry/myapp", "latest")
    .WithHttpEndpoint(targetPort: 8080);

builder.Build().Run();`,

  container: `var builder = DistributedApplication.CreateBuilder(args);

// Add custom container
var customContainer = builder.AddContainer("mycustomcontainer", "myregistry/myapp", "latest")
    .WithHttpEndpoint(targetPort: 8080);

builder.Build().Run();`,

  // Deployment variants
  frontendDeployment: `var builder = DistributedApplication.CreateBuilder(args);

// Add frontend service
var frontend = builder.AddViteApp("frontend", "../frontend")
    .WithHttpEndpoint(env: "PORT")
    .WithNpmPackageInstallation()
    .PublishAsDockerFile();

builder.Build().Run();`,

  frontendContainerDeployment: `var builder = DistributedApplication.CreateBuilder(args);

// Add frontend service
var frontend = builder.AddViteApp("frontend", "../frontend")
    .WithHttpEndpoint(env: "PORT")
    .WithNpmPackageInstallation()
    .PublishAsDockerFile();

// Add custom container
var customContainer = builder.AddContainer("mycustomcontainer", "myregistry/myapp", "latest")
    .WithHttpEndpoint(targetPort: 8080)
    .PublishAsKubernetes();

builder.Build().Run();`,

  databaseFrontendDeployment: `var builder = DistributedApplication.CreateBuilder(args);

// Add database
var postgres = builder.AddAzurePostgresFlexibleServer("db")
    .AddDatabase("appdata")
    .WithDataVolume()
    .RunAsContainer();

// Add frontend service
var frontend = builder.AddViteApp("frontend", "../frontend")
    .WithHttpEndpoint(env: "PORT")
    .WithNpmPackageInstallation()
    .PublishAsDockerFile();

builder.Build().Run();`,

  databaseFrontendContainerDeployment: `var builder = DistributedApplication.CreateBuilder(args);

// Add database
var postgres = builder.AddAzurePostgresFlexibleServer("db")
    .AddDatabase("appdata")
    .WithDataVolume()
    .RunAsContainer();

// Add frontend service
var frontend = builder.AddViteApp("frontend", "../frontend")
    .WithHttpEndpoint(env: "PORT")
    .WithNpmPackageInstallation()
    .PublishAsDockerFile();

// Add custom container
var customContainer = builder.AddContainer("mycustomcontainer", "myregistry/myapp", "latest")
    .WithHttpEndpoint(targetPort: 8080)
    .PublishAsKubernetes();

builder.Build().Run();`,

  apiFrontendDeployment: `var builder = DistributedApplication.CreateBuilder(args);

// Add API service
var api = builder.AddProject("api", "../api/ApiService.csproj")
    .PublishAsAzureContainerApp();

// Add frontend service and reference the API
var frontend = builder.AddViteApp("frontend", "../frontend")
    .WithHttpEndpoint(env: "PORT")
    .WithReference(api)
    .WithNpmPackageInstallation()
    .PublishAsDockerFile();

builder.Build().Run();`,

  apiFrontendContainerDeployment: `var builder = DistributedApplication.CreateBuilder(args);

// Add API service
var api = builder.AddProject("api", "../api/ApiService.csproj")
    .PublishAsAzureContainerApp();

// Add frontend service and reference the API
var frontend = builder.AddViteApp("frontend", "../frontend")
    .WithHttpEndpoint(env: "PORT")
    .WithReference(api)
    .WithNpmPackageInstallation()
    .PublishAsDockerFile();

// Add custom container
var customContainer = builder.AddContainer("mycustomcontainer", "myregistry/myapp", "latest")
    .WithHttpEndpoint(targetPort: 8080)
    .PublishAsKubernetes();

builder.Build().Run();`,

  databaseApiFrontendDeployment: `var builder = DistributedApplication.CreateBuilder(args);

// Add database
var postgres = builder.AddAzurePostgresFlexibleServer("db")
    .AddDatabase("appdata")
    .WithDataVolume()
    .RunAsContainer();

// Add API service and reference the database
var api = builder.AddProject("api", "../api/ApiService.csproj")
    .WithReference(postgres)
    .WaitFor(postgres)
    .PublishAsAzureContainerApp();

// Add frontend service and reference the API
var frontend = builder.AddViteApp("frontend", "../frontend")
    .WithHttpEndpoint(env: "PORT")
    .WithReference(api)
    .WithNpmPackageInstallation()
    .PublishAsDockerFile();

builder.Build().Run();`,

  databaseApiFrontendContainerDeployment: `var builder = DistributedApplication.CreateBuilder(args);

// Add database
var postgres = builder.AddAzurePostgresFlexibleServer("db")
    .AddDatabase("appdata")
    .WithDataVolume()
    .RunAsContainer();

// Add API service and reference the database
var api = builder.AddProject("api", "../api/ApiService.csproj")
    .WithReference(postgres)
    .WaitFor(postgres)
    .PublishAsAzureContainerApp();

// Add frontend service and reference the API
var frontend = builder.AddViteApp("frontend", "../frontend")
    .WithHttpEndpoint(env: "PORT")
    .WithReference(api)
    .WithNpmPackageInstallation()
    .PublishAsDockerFile();

// Add custom container
var customContainer = builder.AddContainer("mycustomcontainer", "myregistry/myapp", "latest")
    .WithHttpEndpoint(targetPort: 8080)
    .PublishAsKubernetes();

builder.Build().Run();`,

  // Non-frontend deployment variants
  databaseDeployment: `var builder = DistributedApplication.CreateBuilder(args);

// Add database
var postgres = builder.AddAzurePostgresFlexibleServer("db")
    .AddDatabase("appdata")
    .WithDataVolume()
    .RunAsContainer();

builder.Build().Run();`,

  databaseContainerDeployment: `var builder = DistributedApplication.CreateBuilder(args);

// Add database
var postgres = builder.AddAzurePostgresFlexibleServer("db")
    .AddDatabase("appdata")
    .WithDataVolume()
    .RunAsContainer();

// Add custom container
var customContainer = builder.AddContainer("mycustomcontainer", "myregistry/myapp", "latest")
    .WithHttpEndpoint(targetPort: 8080)
    .PublishAsKubernetes();

builder.Build().Run();`,

  apiDeployment: `var builder = DistributedApplication.CreateBuilder(args);

// Add API service
var api = builder.AddProject("api", "../api/ApiService.csproj")
    .PublishAsAzureContainerApp();

builder.Build().Run();`,

  apiContainerDeployment: `var builder = DistributedApplication.CreateBuilder(args);

// Add API service
var api = builder.AddProject("api", "../api/ApiService.csproj")
    .PublishAsAzureContainerApp();

// Add custom container
var customContainer = builder.AddContainer("mycustomcontainer", "myregistry/myapp", "latest")
    .WithHttpEndpoint(targetPort: 8080)
    .PublishAsKubernetes();

builder.Build().Run();`,

  databaseApiDeployment: `var builder = DistributedApplication.CreateBuilder(args);

// Add database
var postgres = builder.AddAzurePostgresFlexibleServer("db")
    .AddDatabase("appdata")
    .WithDataVolume()
    .RunAsContainer();

// Add API service and reference the database
var api = builder.AddProject("api", "../api/ApiService.csproj")
    .WithReference(postgres)
    .WaitFor(postgres)
    .PublishAsAzureContainerApp();

builder.Build().Run();`,

  databaseApiContainerDeployment: `var builder = DistributedApplication.CreateBuilder(args);

// Add database
var postgres = builder.AddAzurePostgresFlexibleServer("db")
    .AddDatabase("appdata")
    .WithDataVolume()
    .RunAsContainer();

// Add API service and reference the database
var api = builder.AddProject("api", "../api/ApiService.csproj")
    .WithReference(postgres)
    .WaitFor(postgres)
    .PublishAsAzureContainerApp();

// Add custom container
var customContainer = builder.AddContainer("mycustomcontainer", "myregistry/myapp", "latest")
    .WithHttpEndpoint(targetPort: 8080)
    .PublishAsKubernetes();

builder.Build().Run();`,

  containerDeployment: `var builder = DistributedApplication.CreateBuilder(args);

// Add custom container
var customContainer = builder.AddContainer("mycustomcontainer", "myregistry/myapp", "latest")
    .WithHttpEndpoint(targetPort: 8080)
    .PublishAsKubernetes();

builder.Build().Run();`,
};
---

<div class="container">
  <div class="header" dir={Astro.locals.t.dir()}>
    <h3>{Astro.locals.t('appHostBuilder.heading', { appHost: 'AppHost' })}</h3>
    <p>{Astro.locals.t('appHostBuilder.description')}</p>

    <div class="toggles">
      <button
        class="toggle active"
        data-toggle="frontend"
        data-tooltip-placement="top"
        title={Astro.locals.t('appHostBuilder.frontendTooltip')}
      >
        <Icon name="laptop" size="1.2rem" />
        <span>Front end</span>
      </button>

      <button
        class="toggle"
        data-toggle="database"
        data-tooltip-placement="top"
        title={Astro.locals.t('appHostBuilder.databaseTooltip')}
      >
        <Icon name="seti:db" size="1.2rem" />
        <span>{Astro.locals.t('appHostBuilder.database')}</span>
      </button>

      <button
        class="toggle"
        data-toggle="api"
        data-tooltip-placement="top"
        title={Astro.locals.t('appHostBuilder.apiTooltip')}
      >
        <Icon name="seti:json" size="1.2rem" />
        <span>{Astro.locals.t('appHostBuilder.api')}</span>
      </button>

      <button
        class="toggle"
        data-toggle="container"
        data-tooltip-placement="top"
        title={Astro.locals.t('appHostBuilder.containerTooltip')}
      >
        <Icon name="seti:docker" size="1.2rem" />
        <span>{Astro.locals.t('appHostBuilder.container')}</span>
      </button>

      <button
        class="toggle"
        data-toggle="deployment"
        data-tooltip-placement="top"
        title={Astro.locals.t('appHostBuilder.deploymentTooltip')}
      >
        <Icon name="rocket" size="1.2rem" />
        <span>{Astro.locals.t('appHostBuilder.deploy')}</span>
      </button>
    </div>
  </div>

  <div class="code-display" data-disable-copy>
    <div class="code-variant" data-variant="empty" style="display: none;">
      <Code code={codes.empty} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="frontend">
      <Code code={codes.frontend} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="frontendContainer" style="display: none;">
      <Code code={codes.frontendContainer} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="databaseFrontend" style="display: none;">
      <Code code={codes.databaseFrontend} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="databaseFrontendContainer" style="display: none;">
      <Code code={codes.databaseFrontendContainer} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="apiFrontend" style="display: none;">
      <Code code={codes.apiFrontend} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="apiFrontendContainer" style="display: none;">
      <Code code={codes.apiFrontendContainer} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="databaseApiFrontend" style="display: none;">
      <Code code={codes.databaseApiFrontend} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="databaseApiFrontendContainer" style="display: none;">
      <Code code={codes.databaseApiFrontendContainer} lang="cs" title="AppHost.cs" />
    </div>
    <!-- Non-frontend variants -->
    <div class="code-variant" data-variant="database" style="display: none;">
      <Code code={codes.database} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="databaseContainer" style="display: none;">
      <Code code={codes.databaseContainer} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="api" style="display: none;">
      <Code code={codes.api} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="apiContainer" style="display: none;">
      <Code code={codes.apiContainer} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="databaseApi" style="display: none;">
      <Code code={codes.databaseApi} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="databaseApiContainer" style="display: none;">
      <Code code={codes.databaseApiContainer} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="container" style="display: none;">
      <Code code={codes.container} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="frontendDeployment" style="display: none;">
      <Code code={codes.frontendDeployment} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="frontendContainerDeployment" style="display: none;">
      <Code code={codes.frontendContainerDeployment} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="databaseFrontendDeployment" style="display: none;">
      <Code code={codes.databaseFrontendDeployment} lang="cs" title="AppHost.cs" />
    </div>
    <div
      class="code-variant"
      data-variant="databaseFrontendContainerDeployment"
      style="display: none;"
    >
      <Code code={codes.databaseFrontendContainerDeployment} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="apiFrontendDeployment" style="display: none;">
      <Code code={codes.apiFrontendDeployment} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="apiFrontendContainerDeployment" style="display: none;">
      <Code code={codes.apiFrontendContainerDeployment} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="databaseApiFrontendDeployment" style="display: none;">
      <Code code={codes.databaseApiFrontendDeployment} lang="cs" title="AppHost.cs" />
    </div>
    <div
      class="code-variant"
      data-variant="databaseApiFrontendContainerDeployment"
      style="display: none;"
    >
      <Code code={codes.databaseApiFrontendContainerDeployment} lang="cs" title="AppHost.cs" />
    </div>
    <!-- Non-frontend deployment variants -->
    <div class="code-variant" data-variant="databaseDeployment" style="display: none;">
      <Code code={codes.databaseDeployment} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="databaseContainerDeployment" style="display: none;">
      <Code code={codes.databaseContainerDeployment} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="apiDeployment" style="display: none;">
      <Code code={codes.apiDeployment} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="apiContainerDeployment" style="display: none;">
      <Code code={codes.apiContainerDeployment} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="databaseApiDeployment" style="display: none;">
      <Code code={codes.databaseApiDeployment} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="databaseApiContainerDeployment" style="display: none;">
      <Code code={codes.databaseApiContainerDeployment} lang="cs" title="AppHost.cs" />
    </div>
    <div class="code-variant" data-variant="containerDeployment" style="display: none;">
      <Code code={codes.containerDeployment} lang="cs" title="AppHost.cs" />
    </div>
  </div>
</div>

<style>
  .container {
    margin: 2rem 0;
    background: var(--sl-color-bg);
    border: 1px solid var(--sl-color-gray-5);
    border-radius: 0.75rem;
    overflow: hidden;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  .header {
    padding: 1.5rem;
    background: var(--sl-color-bg-nav);
    text-align: center;
    border-bottom: 1px solid var(--sl-color-gray-5);
  }

  .header h3 {
    margin: 0 0 0.5rem 0;
    color: var(--sl-color-text);
    font-size: 1.25rem;
    font-weight: 600;
  }

  .header p {
    margin: 0 0 1.5rem 0;
    font-size: 0.9rem;
  }

  .toggles {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 0.75rem;
  }

  .toggle {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 0.4rem;
    padding: 0.75rem 0.5rem;
    margin: 0;
    background: var(--sl-color-bg);
    border: 1px solid var(--sl-color-gray-5);
    border-radius: 0.5rem;
    cursor: pointer;
    font-size: 0.8rem;
    font-weight: 500;
    color: var(--sl-color-text);
    min-height: 4rem;
    box-sizing: border-box;
  }

  .toggle:hover {
    border-color: var(--sl-color-gray-4);
    background: var(--sl-color-bg-nav);
    transform: translateY(-1px);
  }

  .toggle.active {
    background: var(--aspire-color-primary);
    border-color: var(--sl-color-gray-4);
    color: var(--aspire-color-white);
  }

  .code-display {
    padding: 1.5rem;
    margin-top: 0;
    border-top: 1px solid var(--sl-color-border);
  }

  .code-variant {
    margin-top: 0;
  }

  html[data-theme='dark'] .toggle.active {
    color: var(--aspire-color-white);
  }

  @media (max-width: 768px) {
    .toggles {
      grid-template-columns: repeat(2, 1fr);
      gap: 0.5rem;
    }

    .toggle {
      padding: 0.5rem 0.25rem;
      font-size: 0.75rem;
    }
  }

  @media (max-width: 480px) {
    .toggles {
      grid-template-columns: 1fr;
      gap: 0.5rem;
    }
  }
</style>

<script type="module" is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    const toggleButtons = document.querySelectorAll('.toggle');
    const codeVariants = document.querySelectorAll('.code-variant');

    toggleButtons.forEach((button) => {
      button.addEventListener('click', () => {
        button.classList.toggle('active');
        updateCodeDisplay();
      });
    });

    function getVariantKey() {
      const hasFrontend = document
        .querySelector('.toggle[data-toggle="frontend"]')
        .classList.contains('active');
      const hasDatabase = document
        .querySelector('.toggle[data-toggle="database"]')
        .classList.contains('active');
      const hasApi = document
        .querySelector('.toggle[data-toggle="api"]')
        .classList.contains('active');
      const hasContainer = document
        .querySelector('.toggle[data-toggle="container"]')
        .classList.contains('active');
      const hasDeployment = document
        .querySelector('.toggle[data-toggle="deployment"]')
        .classList.contains('active');

      // If nothing is selected, show empty state
      if (!hasFrontend && !hasDatabase && !hasApi && !hasContainer) {
        return 'empty';
      }

      let variant = '';

      // Build variant key based on database, API, and frontend
      if (hasDatabase && hasApi && hasFrontend) {
        variant = 'databaseApiFrontend';
      } else if (hasDatabase && hasApi && !hasFrontend) {
        variant = 'databaseApi';
      } else if (hasDatabase && !hasApi && hasFrontend) {
        variant = 'databaseFrontend';
      } else if (hasDatabase && !hasApi && !hasFrontend) {
        variant = 'database';
      } else if (!hasDatabase && hasApi && hasFrontend) {
        variant = 'apiFrontend';
      } else if (!hasDatabase && hasApi && !hasFrontend) {
        variant = 'api';
      } else if (!hasDatabase && !hasApi && hasFrontend) {
        variant = 'frontend';
      } else if (!hasDatabase && !hasApi && !hasFrontend && hasContainer) {
        // Only container selected
        variant = 'container';
      }

      // Add container suffix if present (and we already have a base variant)
      if (hasContainer && variant && variant !== 'container') {
        variant += 'Container';
      }

      // Add deployment suffix if present
      if (hasDeployment) {
        variant += 'Deployment';
      }

      console.debug('Generated variant:', variant); // Debug logging
      return variant;
    }

    function updateCodeDisplay() {
      const targetVariant = getVariantKey();

      console.debug('Looking for variant:', targetVariant); // Debug logging

      codeVariants.forEach((variant) => {
        variant.style.display = 'none';
      });

      const targetElement = document.querySelector(`[data-variant="${targetVariant}"]`);
      if (targetElement) {
        targetElement.style.display = 'block';
        console.debug('Found and displayed variant:', targetVariant); // Debug logging
      } else {
        console.debug('Variant not found:', targetVariant); // Debug logging
        console.debug(
          'Available variants:',
          Array.from(codeVariants).map((v) => v.dataset.variant)
        ); // Debug logging
      }
    }
  });
</script>
